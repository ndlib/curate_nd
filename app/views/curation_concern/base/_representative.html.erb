<% if work.representative.present? %>
  <!-- make sure representative file is available for use -->
  <% work.check_and_clear_representative %>
  <% if work.try(:generic_files) || work.class == GenericFile %>
    <% generic_file = GenericFile.load_instance_from_solr(work.representative) %>
    <!-- if representative file is audio, regardless of class, use audio player -->
    <% if can?(:read, generic_file) && generic_file.audio? %>
      <div class="row">
        <div class="work-representation span12">
          <%= render partial: 'curation_concern/base/audio_player', locals: { work: work, generic_file: generic_file  } %>
        </div>
        <div class="work-attributes span12">
          <%= details %>
        </div>
      </div>
    <!-- else if Image class and representative file is image -->
    <% elsif can?(:read, generic_file) && generic_file.image? && (work.class == Image || work.class == GenericFile) %>
      <div class="row">
        <div class="work-representation span12">
          <%= render partial: 'curation_concern/base/image_viewer', locals: { work: work, generic_file: generic_file } %>
        </div>
      </div>
      <div class="row">
        <div class="work-attributes span12">
          <%= details %>
        </div>
      </div>
    <!-- else use basic logic -->
    <% else %>
      <div class="row">
        <div class="work-representation span3">
          <%= render partial: 'curation_concern/base/representative_media', locals: { work: work, generic_file: generic_file  } %>
        </div>
        <div class="work-attributes span9">
          <%= details %>
        </div>
      </div>
    <% end %>
  <!-- else if no generic file use basic logic -->
  <% else %>
    <div class="row">
      <div class="work-representation span3">
        <%= render partial: 'curation_concern/base/representative_media', locals: { work: work } %>
      </div>
      <div class="work-attributes span9">
        <%= details %>
      </div>
    </div>
  <% end %>
<% end %>

